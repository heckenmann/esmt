image: node:7.8.0

cache:
  paths:
    - node_modules/

build:
  before_script:
    - npm install -g @angular/cli
  script:
    - npm install

e2e_test:
  before_script:
    - npm install -g @angular/cli
    - npm install --only=dev
    # install chrome
    - apt-get update
    - apt-get install -y chromium chromium-l10n xvfb
    - rm -rf /var/lib/apt/lists/*

    # xvfb
    - export DISPLAY=:99.0
    - Xvfb -ac $DISPLAY &

  script:
    - ng e2e
